package me.lefted.solution;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.function.Function;
import java.util.function.ToIntFunction;

public class Solution {

    public static void main(String[] args) {
	String input = "......#..........##......#.####\r\n" + ".##...###....#.....#...#.#.....\r\n" + "#..##..#.....#............#.#.#\r\n"
	    + "##.#....#####..#....#..#.#.....\r\n" + "..#.#...##.##.......#.#..#..##.\r\n" + "##.#.......#.#.#..#...#.#...#..\r\n"
	    + "...#...#..#.##....##..#.#......\r\n" + ".......##.#.#.#.##...#.........\r\n" + "..#...##.##...##..##.##...#....\r\n"
	    + ".#.#...#.....####..#.#...#.##..\r\n" + ".#...#......##......##....#....\r\n" + "..#.....#.........##.#...#.#...\r\n"
	    + "...#.#...#..##...#....#.....##.\r\n" + "..#.....#..#..#......###.......\r\n" + "...##.#....##..##...........#..\r\n"
	    + "....#......#..#....###...#.....\r\n" + ".....#...#.#.....#..##........#\r\n" + "....#...#....##.#.##.#...#..#.#\r\n"
	    + ".......##.#......##....#....#..\r\n" + "...#.#...##..#...#..#..#..##.#.\r\n" + "##.#...#..#..................##\r\n"
	    + "##........#....##...#..#..#....\r\n" + ".#.#..............#######.##...\r\n" + "##..#..#.#.##..#...............\r\n"
	    + "..#........#..#...##.......#...\r\n" + "............##.##.#..........##\r\n" + ".....##..#.....##..#.....#.....\r\n"
	    + "..#.##.###.#..##.............#.\r\n" + ".........##...........#.....#..\r\n" + "..#....#.#.###.#.#.......##....\r\n"
	    + "..###..##..#.#.##......#.#.##..\r\n" + "##......#.#....##.#..#.#..#.#.#\r\n" + "..##.#.###.#...#...............\r\n"
	    + "..####.......#...#.##....#.....\r\n" + "..#....##...#.#.#.#....#.##..##\r\n" + ".#...####..###....#.###...##...\r\n"
	    + "..#.#..........#.#..#..#.....##\r\n" + ".#....#.........###...#.....##.\r\n" + "..#.#.#.##........#.##.#.....#.\r\n"
	    + "#....#....###...#..#.........#.\r\n" + "#..#.###....#..............#...\r\n" + "............#....##.#......#.#.\r\n"
	    + "...#..#.####...............##..\r\n" + "....##......#.#.........####..#\r\n" + ".#....###..#.#..##........##...\r\n"
	    + "#..##.....###..#...............\r\n" + "..#...........#........#...#..#\r\n" + "......................#.#..#...\r\n"
	    + ".#.##.#..#.#....#...#...#.#....\r\n" + "..#..#.........#..#.#..........\r\n" + ".#......#####...#......#..#....\r\n"
	    + "..........#.....#..#.##.####.##\r\n" + "##.##..#............#####...#.#\r\n" + "..##..#..###......#...#...#....\r\n"
	    + "....#####........#.##...###....\r\n" + "......#...##..#..#............#\r\n" + "...#....##.##...#..#...#.......\r\n"
	    + "....#####.#...............###..\r\n" + ".#....#..##....#.#.#..##.##...#\r\n" + "...#..#..#........#.#####.....#\r\n"
	    + "......##.#...#..#..#.....#..###\r\n" + "###.......#.#........#......#.#\r\n" + "..#.#..#..#........#..#......#.\r\n"
	    + "...##.........#..........#.....\r\n" + "...#..###.#.......#.#.........#\r\n" + "....#..#.##...##.....#.....##..\r\n"
	    + "#.#.#.#.....##.##.###..#.#....#\r\n" + "..#....#.....##.####..#........\r\n" + "...#..#.##.....##.#..#....###..\r\n"
	    + ".#..#.....#....#...#.#.......##\r\n" + "..#..#.......#.#.###......#.##.\r\n" + ".###.####....##............##.#\r\n"
	    + "#....###.#......##.#......##.#.\r\n" + ".##...........#.#....#.........\r\n" + "#.##..##...#...........###....#\r\n"
	    + "#.#..#...#.#..#..###.#.##...#..\r\n" + "..#...#.#..##....#..#..#.......\r\n" + "#..##..#.####...#...#..####.##.\r\n"
	    + "###..#.##....#...#.###..##...##\r\n" + "##..#..#.#....#.....##.......#.\r\n" + "..#..##.##.#.......###.#.....#.\r\n"
	    + "..........#.####....#.......#..\r\n" + "#...#.#..#.......##......##..##\r\n" + "##...##.##..###...............#\r\n"
	    + "....##.#...#.......##...##..#..\r\n" + ".#.........#...#.#...##.#.....#\r\n" + ".#...#.#..#...#..##....#..#...#\r\n"
	    + ".#.#...#..#..###...##....#.....\r\n" + ".........#.#...####..#...#.#...\r\n" + "...#.............#.#..........#\r\n"
	    + "...#...#..##.#........#.#......\r\n" + "...#...#.....#....#..###.##.###\r\n" + ".#.#........#....#...#.###.#.#.\r\n"
	    + "##.....#.......#..##.#....#..##\r\n" + "...###...#.#.#.#....#.#....#...\r\n" + "#...#.#.......##.#..#....#.#...\r\n"
	    + "#...#......###.....###........#\r\n" + "..#.##...##....#...#....#.#....\r\n" + "#....#..###....##.#......##...#\r\n"
	    + "##.#...#..........#.##....#..#.\r\n" + ".##....#............###.#...#..\r\n" + "###.##.#####.##.....##..#####..\r\n"
	    + "..###.###.......#.#...#....#...\r\n" + ".#...#....####.........#.......\r\n" + "..##.#.#......#....#.#....#.#.#\r\n"
	    + "#.####.....#....#..#.....#.##..\r\n" + "###.###.##...##.#.#.#.....#.#..\r\n" + ".......#.....#.......##.#.....#\r\n"
	    + "#..#.##...#........#.#.......##\r\n" + "#.#........#...#....#..........\r\n" + "..#....##.#......#..#..........\r\n"
	    + "#....##.....#.....#.##.#...#...\r\n" + "....#.#.....#....####...#.#.##.\r\n" + "......#.......##...##.#......#.\r\n"
	    + ".#.........##...#..#..##..#....\r\n" + ".#...##.....##.#....#..........\r\n" + "....#.###..##..#...#..........#\r\n"
	    + "......#...#.#.#........##......\r\n" + ".#..........#.#.....#..##..#.#.\r\n" + ".......###.#......#....#.#..#..\r\n"
	    + "..##.......#....#....#.#...##.#\r\n" + "#.##.#.......#..###..##...#.#..\r\n" + "......####....#.#.....#...#..#.\r\n"
	    + "#.##.###..#..#.#.....###..#.#.#\r\n" + "#.#.#..#.#..##...#...#..##.###.\r\n" + "....##..##.#...............#.#.\r\n"
	    + "..###.#.#.##..#....##.......#..\r\n" + "#.#....#..........##......#####\r\n" + ".#.#.......##.#.#......##..#.#.\r\n"
	    + "......#.###.##.#..#....#.##....\r\n" + "..###........#.......##.#.#....\r\n" + ".#..##.............#.##.###...#\r\n"
	    + ".#####...#......#.......##.....\r\n" + "##..###.#...#....#..#....#.#..#\r\n" + ".#.........###.##.....##.....##\r\n"
	    + ".##.#....#..#.#..##..#....##...\r\n" + ".#..#..#......###...#.......#..\r\n" + "#.#...#.....#..#.#.#..#..###...\r\n"
	    + "....#....#..#..#....#..#.#.#...\r\n" + "......#.......#.#.#.#.....#....\r\n" + "###...#...#......#..#.#.#..#.#.\r\n"
	    + "#...##.##.##........##....#....\r\n" + ".....#.......#...#...#.#.#....#\r\n" + "...##.....##.#...#.#.#.#..#..#.\r\n"
	    + ".#.......##...........#...#.##.\r\n" + ".##..........#......#.#...###..\r\n" + ".....##...#.....#...#......#...\r\n"
	    + "...........#.....#..#...#..#.#.\r\n" + "#.....##..#...........##....#..\r\n" + "#.##...###.###....##..#..#....#\r\n"
	    + "#.#.##...##....###....##.##....\r\n" + ".#..###.....#......#...#...#..#\r\n" + "..#...#....#.#.###.#..#......#.\r\n"
	    + "......#.........#..#.##...#...#\r\n" + "..#.#....##.#..##..##...#....#.\r\n" + "#.....#....##.........##.#.....\r\n"
	    + "...#...#..###.###......##...###\r\n" + ".##.###...##..#.##....##.#..#..\r\n" + "..#..#.......#................#\r\n"
	    + ".....#..#.#.#..........##..#...\r\n" + "......###.#.#............#..#.#\r\n" + "..#.##.....##....#...#...#.#...\r\n"
	    + "..#......##...#...##........#..\r\n" + "#.....#.....#..#......#.###...#\r\n" + "....#..#.#.....#...#....#.#...#\r\n"
	    + "#.......#..#...##..#.#..#.##...\r\n" + "..#......###...#.........##...#\r\n" + "...#.......##.....#..##........\r\n"
	    + ".#....#.#.....##.#.#...........\r\n" + "##..#..#...#.##.#.#.#.#.#..##.#\r\n" + "##...####.#.#.##...#..#......#.\r\n"
	    + "#.##..####.##.#.........#...###\r\n" + "#...#.......#.#..####.#.#.#....\r\n" + "#....#........#........#.......\r\n"
	    + "..#..####.....#....##...###.##.\r\n" + "...#.#..####.........#....#.##.\r\n" + "##.#...#...#..#.#..##.....##...\r\n"
	    + "....#.........#.##........##.#.\r\n" + "##...#......#....#..#....#....#\r\n" + "###.....#......##...#...##...#.\r\n"
	    + "#.##...............#.......#...\r\n" + ".##.#...#..#....#.#.....###..#.\r\n" + ".....##...#.##.....##...#....#.\r\n"
	    + "#.#..#..........#####..##......\r\n" + "..#.........##...#.........#.##\r\n" + "...#..##.#.#..#......#..###.###\r\n"
	    + "#..#...#.#...##..........#.....\r\n" + ".###..#....###.....#....#..###.\r\n" + "#..#....#...#........##.....#..\r\n"
	    + ".#..###........#....#..####..##\r\n" + ".#..#.#.#.......##.#..##.#..##.\r\n" + "..#..###......##....#..#..#..#.\r\n"
	    + ".......###..##....#......#...##\r\n" + "#........#.##.............##.#.\r\n" + "...#.#.#....##....##.###...#...\r\n"
	    + "..#.....#..##..#.#.......#.####\r\n" + ".#......##.........##...#.....#\r\n" + ".#.###........##....###.#.#...#\r\n"
	    + "##...#.#....#.....##.......#..#\r\n" + "#...........#...........####...\r\n" + "#..#.#..##..#...#....#.##....#.\r\n"
	    + "................##.............\r\n" + "..##...#.#....##....#...#......\r\n" + ".#.....#....#....#..#..#.#..##.\r\n"
	    + ".....######.#.#.##.###.#.......\r\n" + "..#####....#..#...........#.#..\r\n" + ".......#..#..##.#...###.#.#.###\r\n"
	    + "###...#...#..##.#.##..#...#..#.\r\n" + ".#..#..............#...........\r\n" + ".#.....#.....##....#....##..#..\r\n"
	    + "....#####.#....#......#.......#\r\n" + ".#.#.....##.####..#...#.......#\r\n" + ".#...##.#.......#.....##.#..##.\r\n"
	    + "..........#...#....###....#...#\r\n" + "..#......#...#...#..#.#........\r\n" + ".......#.......#..####..##.....\r\n"
	    + ".#..#.....###...#...#...#...#..\r\n" + "##..#.......#.#...#..#..#.##..#\r\n" + "#..#...#.#.....#.##.#........#.\r\n"
	    + "......#......#.#..###.##..###..\r\n" + ".#..#..#.##.#...........#...##.\r\n" + ".#....#...#.#..#.#.#...##.#..#.\r\n"
	    + "##.#....#..#..#.#...#......#.#.\r\n" + "..#.#............##...#........\r\n" + "...####...#...#.....##..#...###\r\n"
	    + "....###.......###.##..#.###....\r\n" + "#......#.#....#.#.##.#.##..###.\r\n" + ".....##.....#..##.....##....#..\r\n"
	    + "..#...#..##.#.##.#.#.#.......##\r\n" + "#....#..##.......#......#..#.##\r\n" + "#.....##...#..##......##.#.#..#\r\n"
	    + "....#..##..#.##...#.#.##..#..##\r\n" + "#..#...##....##..#...#....#...#\r\n" + ".##.#.#....#.....#........##.#.\r\n"
	    + "..##..#....#........#.....#....\r\n" + ".##.#..##...#.....#...###.....#\r\n" + "#..#..#........#..#.....#.#.#.#\r\n"
	    + "..##..###.#..#...#.#......#..#.\r\n" + "#.....#.....#.###......##..#.#.\r\n" + ".........#...##.........#...#..\r\n"
	    + ".##.#.##......#.#...###..#....#\r\n" + "...##.#..###........##......#..\r\n" + "...#.#...#......#.#.#....#..#..\r\n"
	    + "..####.........#..#....#.......\r\n" + "#..#.........##.#.##....#.....#\r\n" + "..#..#..#.#........#.###.......\r\n"
	    + "##.#..#..#....#...##.......#..#\r\n" + "..#.#.....#.............#...##.\r\n" + "..........#...##.....#..#.#..#.\r\n"
	    + "....#..#...#..##..#...##.#.....\r\n" + "##....#......#..#.....#..#.....\r\n" + "...#.#.#.#...........##...#.#..\r\n"
	    + "....#.###...#............#.....\r\n" + ".#.#.#.......#.#......#....#.#.\r\n" + "#.#.#.#..##.#..#..##...##.#..#.\r\n"
	    + ".#.##....##..#........#....#...\r\n" + "####...#....#.#...#..#..###...#\r\n" + ".....#.#.##.......##..#.######.\r\n"
	    + ".......#.#.#.....#.#..##....#..\r\n" + "..#....#.#..#.#.#..#..#........\r\n" + ".....##......#.........#.#...##\r\n"
	    + "#....##.#.....#..........#.#...\r\n" + "#...#.#..#.#..#.#....#..#.#....\r\n" + "....##........#................\r\n"
	    + "###.#.#...#..##...#...#.##...#.\r\n" + "...#....###..#..##..#..#.......\r\n" + ".....#..........#.#........##.#\r\n"
	    + ".#........#.##.#..##..#...#...#\r\n" + "..##....#...#.#.........##.#...\r\n" + "......#...#......#.....#.......\r\n"
	    + "....##.##..#.##...#.#.#.##.#.#.\r\n" + "..#...#.....#.#....##.#........\r\n" + ".#.#.......#.......###..#..#...\r\n"
	    + "#...#..#..#..##....#...#.....#.\r\n" + ".#..####.##.....##.........#.#.\r\n" + "#...###.......#...####..##.....\r\n"
	    + "#.##.#....#.#.##.......#...#...\r\n" + "..#.......#.#.##.##..#...##....\r\n" + ".#.......#.#..#.....#.....#.#..\r\n"
	    + "..#..#.......##.....#.#.....#.#\r\n" + "#...###..#..#..##...#.....#..##\r\n" + "......#................#.......\r\n"
	    + "..#.....##..#.......#...#...##.\r\n" + "...##...####.#..#...#.......##.\r\n" + "..#...#..#...#...#..#..#####...\r\n"
	    + "#..#...#....#....#...........#.\r\n" + "..#.......#..#.##...##..###...#\r\n" + ".#..#..#......##...#....#......\r\n"
	    + "...#..##....#..........#.....#.\r\n" + "###...#.#......#.#.....#.....##\r\n" + "#.#..#.....#........#.##.#.##..\r\n"
	    + "....#...#.....#..#.......#.#...\r\n" + "#.#...##....#..#.....#...#.#.#.\r\n" + ".#......#...##..#.......#......\r\n"
	    + "...#...#.#.#.###.#..#.#..#.....\r\n" + "###...#..###.#...#..##...####..\r\n" + ".#.#.#..#........#..#......#..#\r\n"
	    + ".#..#....#......#....#.#...#...\r\n" + ".##..........###...##.....#.#..\r\n" + ".#...#.#.##.##..###.#...#..###.\r\n"
	    + "......#......#......#.##......#\r\n" + "..#.##..#.#..#....##..##...#...\r\n" + ".#......#..#...##....#...#.....\r\n"
	    + ".#.....#.##..........#..#......\r\n" + "###.#..#.##..#..##...#..#...#..\r\n" + "#.....###........#.#..##.#.....\r\n"
	    + ".....#.......##.....##.....#.##\r\n" + "...##.#......####....##........\r\n" + "..#..#..#....#.##.....##.####..\r\n"
	    + "...#..#....#.#..#.#..#.#.#..#..\r\n" + "#..........#....#.#.#.#...#..#.\r\n" + "...####.##...#..#.......#.#..##\r\n"
	    + "#........#..#..................\r\n" + ".#..#....#.#.#..#..........#...\r\n" + "###...#....####....#......#..#.\r\n"
	    + "#.........####..#..#...........\r\n" + ".....##..#..##.##.##.#..#.....#\r\n" + ".#..#.#.##..#..#.#.#.##.###....\r\n"
	    + "......##......#...#.##....#..#.\r\n" + ".#.#....#..#......#..#...###...\r\n" + ".##...#......##...###...#.#...#\r\n"
	    + ".......#.#....#............#..#\r\n" + ".#..##.#.######...#...#......#.\r\n" + "";
	List<String> inputStrings = Arrays.asList(input.split("\r\n"));

//	System.out.println(treeEncounters(inputStrings, 3, 1));;
	
	long sol = treeEncounters(inputStrings, 1, 1) * 214 * treeEncounters(inputStrings, 5, 1) * treeEncounters(inputStrings, 7, 1) * treeEncounters(
	    inputStrings, 1, 2);

	 System.out.println(String.format("Solution %s", sol));
    }

    public static long treeEncounters(List<String> inputStrings, int right, int down) {
	int treeEncounters = 0;

	int x = 0;
	// int y = 0;

	for (int i = 0; i < inputStrings.size() - 1; ++i) {
	    String line = inputStrings.get(i);

	    int futX = x + right;
	    int futY = i + down;
	    String nextLine = inputStrings.get(futY);

	    if (futX >= line.length()) {
		int tooMuch = futX - (line.length() - 0);
		futX = 0 + tooMuch;
	    }

	    if (nextLine.charAt(futX) == '#') {
		++treeEncounters;
	    }
	    x = futX;
	    i = i + down - 1;
	}
	return treeEncounters;
    }
}
